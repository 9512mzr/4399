OT2.LocalData={userData:null,name:location.hostname,isLocalStorage:"undefined"!=typeof localStorage,init:function(){if(!this.userData)try{this.userData=document.createElement("INPUT"),this.userData.type="hidden",this.userData.style.display="none",this.userData.addBehavior("#default#userData"),document.body.appendChild(this.userData);var t=new Date;t.setDate(t.getDate()+365),this.userData.expires=t.toUTCString()}catch(t){return!1}return!0},setLocal:function(t,e){this.isLocalStorage?localStorage.setItem(t,e):this.init()&&(this.userData.load(this.name),this.userData.setAttribute(t,e),this.userData.save(this.name))},set:function(t,e,a){void 0!==USER.uid&&(this.setLocal(t,e),void 0===a?$.post("/ajax/set-basket",{key:t,value:e}).done(function(){}):$.ajax({type:"post",url:"/ajax/set-basket",data:{key:t,value:e},async:a}))},getLocal:function(t){return this.isLocalStorage?localStorage.getItem(t):this.init()?(this.userData.load(this.name),this.userData.getAttribute(t)):null},get:function(t){var e=null,a=this;if(void 0!==USER.uid){var i=this.getCookie("has_"+t+"_"+USER.uid);e=this.getLocal(t),i&&e&&"{}"!=e||$.ajax({type:"get",url:"/ajax/get-basket",data:{key:t},async:!1,success:function(i){200==i.res&&(a.setCookie("has_"+t+"_"+USER.uid,1),a.removeLocal(t),e=i.data)}})}return e},setCookie:function(t,e,a){var i=new Date;i.setTime(i.getTime()+60*a*60*1e3),document.cookie=t+"="+e+";path=/"},getCookie:function(t){for(var e=document.cookie.split("; "),a=0;a<e.length;a++){var i=e[a].split("=");if(i[0]==t)return decodeURI(i[1])}},removeLocal:function(t){this.isLocalStorage?localStorage.removeItem(t):this.init()&&(this.userData.load(this.name),this.userData.removeAttribute(t),this.userData.save(this.name))},remove:function(t,e){void 0!==USER.uid&&(this.removeLocal(t),void 0===e?$.get("/ajax/remove-basket",{key:t}).done(function(){}):$.ajax({type:"get",url:"/ajax/remove-basket",data:{key:t},async:!1}))}};